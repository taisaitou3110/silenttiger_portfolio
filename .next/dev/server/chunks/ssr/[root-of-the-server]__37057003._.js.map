{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/taisaitou/GeminiCLI/contexts/FinancialContext.tsx"],"sourcesContent":["\"use client\";\n\nimport { createContext, useReducer, Dispatch, ReactNode, FC } from 'react';\n\n// --- 型定義 ---\nexport interface DetailItem {\n  id: number;\n  name: string;\n  amount: number;\n}\n\nexport interface FinancialSection {\n  total: number;\n  items: DetailItem[];\n}\n\n// アプリケーション全体のステートの型\nexport interface AppState {\n  revenue: FinancialSection;\n  cogs: FinancialSection;\n  sga: FinancialSection;\n  nonOpIncome: FinancialSection;\n  nonOpExpenses: FinancialSection;\n  specialIncome: FinancialSection;\n  specialLosses: FinancialSection;\n  taxRate: { total: number; items: [] }; // taxRateはtotalのみ使用\n}\n\n// Actionの型定義\nexport type Action =\n  | { type: 'SET_ENTIRE_STATE'; payload: AppState }\n  | { type: 'UPDATE_ITEM_AMOUNT'; payload: { section: keyof AppState; itemId: number; amount: number } }\n  | { type: 'UPDATE_SECTION_TOTAL'; payload: { section: keyof AppState, total: number } };\n\n// --- 初期状態 ---\nconst createInitialSection = (name: string, count = 5): FinancialSection => ({\n  total: 0,\n  items: Array.from({ length: count }, (_, i) => ({ id: i + 1, name: `${name} ${i + 1}`, amount: 0 })),\n});\n\nexport const initialState: AppState = {\n  revenue: createInitialSection('売上項目'),\n  cogs: createInitialSection('原価項目'),\n  sga: createInitialSection('販管費項目'),\n  nonOpIncome: createInitialSection('営業外収益項目', 2),\n  nonOpExpenses: createInitialSection('営業外費用項目', 2),\n  specialIncome: createInitialSection('特別利益項目', 2),\n  specialLosses: createInitialSection('特別損失項目', 2),\n  taxRate: { total: 30, items: [] },\n};\n\n\n// --- Reducer ---\nconst financialReducer = (state: AppState, action: Action): AppState => {\n  switch (action.type) {\n    case 'SET_ENTIRE_STATE':\n      return action.payload;\n\n    case 'UPDATE_ITEM_AMOUNT': {\n      const { section, itemId, amount } = action.payload;\n      const targetSection = state[section];\n      \n      // アイテムの金額を更新\n      const updatedItems = targetSection.items.map(item =>\n        item.id === itemId ? { ...item, amount } : item\n      );\n\n      // 新しい合計値を計算\n      const newTotal = updatedItems.reduce((sum, item) => sum + item.amount, 0);\n\n      return {\n        ...state,\n        [section]: {\n          ...targetSection,\n          items: updatedItems,\n          total: newTotal,\n        },\n      };\n    }\n    \n    case 'UPDATE_SECTION_TOTAL': {\n        const { section, total } = action.payload;\n        // NOTE: このActionは詳細ページのロジックを簡略化するために用意するが、\n        // 本来は詳細アイテムの変更が合計値に反映されるのが一方向で望ましい。\n        // 今回は簡略化のため、合計値の直接更新も可能にする。\n        return {\n            ...state,\n            [section]: {\n                ...state[section],\n                total: total,\n            }\n        }\n    }\n\n    default:\n      return state;\n  }\n};\n\n// --- Contextの作成 ---\nexport const FinancialContext = createContext<{\n  state: AppState;\n  dispatch: Dispatch<Action>;\n}>({\n  state: initialState,\n  dispatch: () => null,\n});\n\n// --- Providerコンポーネント ---\nexport const FinancialProvider: FC<{ children: ReactNode }> = ({ children }) => {\n  const [state, dispatch] = useReducer(financialReducer, initialState);\n\n  return (\n    <FinancialContext.Provider value={{ state, dispatch }}>\n      {children}\n    </FinancialContext.Provider>\n  );\n};\n"],"names":[],"mappings":";;;;;;;;;AAEA;AAFA;;;AAkCA,eAAe;AACf,MAAM,uBAAuB,CAAC,MAAc,QAAQ,CAAC,GAAuB,CAAC;QAC3E,OAAO;QACP,OAAO,MAAM,IAAI,CAAC;YAAE,QAAQ;QAAM,GAAG,CAAC,GAAG,IAAM,CAAC;gBAAE,IAAI,IAAI;gBAAG,MAAM,GAAG,KAAK,CAAC,EAAE,IAAI,GAAG;gBAAE,QAAQ;YAAE,CAAC;IACpG,CAAC;AAEM,MAAM,eAAyB;IACpC,SAAS,qBAAqB;IAC9B,MAAM,qBAAqB;IAC3B,KAAK,qBAAqB;IAC1B,aAAa,qBAAqB,WAAW;IAC7C,eAAe,qBAAqB,WAAW;IAC/C,eAAe,qBAAqB,UAAU;IAC9C,eAAe,qBAAqB,UAAU;IAC9C,SAAS;QAAE,OAAO;QAAI,OAAO,EAAE;IAAC;AAClC;AAGA,kBAAkB;AAClB,MAAM,mBAAmB,CAAC,OAAiB;IACzC,OAAQ,OAAO,IAAI;QACjB,KAAK;YACH,OAAO,OAAO,OAAO;QAEvB,KAAK;YAAsB;gBACzB,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,OAAO,OAAO;gBAClD,MAAM,gBAAgB,KAAK,CAAC,QAAQ;gBAEpC,aAAa;gBACb,MAAM,eAAe,cAAc,KAAK,CAAC,GAAG,CAAC,CAAA,OAC3C,KAAK,EAAE,KAAK,SAAS;wBAAE,GAAG,IAAI;wBAAE;oBAAO,IAAI;gBAG7C,YAAY;gBACZ,MAAM,WAAW,aAAa,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,MAAM,EAAE;gBAEvE,OAAO;oBACL,GAAG,KAAK;oBACR,CAAC,QAAQ,EAAE;wBACT,GAAG,aAAa;wBAChB,OAAO;wBACP,OAAO;oBACT;gBACF;YACF;QAEA,KAAK;YAAwB;gBACzB,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG,OAAO,OAAO;gBACzC,2CAA2C;gBAC3C,oCAAoC;gBACpC,4BAA4B;gBAC5B,OAAO;oBACH,GAAG,KAAK;oBACR,CAAC,QAAQ,EAAE;wBACP,GAAG,KAAK,CAAC,QAAQ;wBACjB,OAAO;oBACX;gBACJ;YACJ;QAEA;YACE,OAAO;IACX;AACF;AAGO,MAAM,iCAAmB,IAAA,sNAAa,EAG1C;IACD,OAAO;IACP,UAAU,IAAM;AAClB;AAGO,MAAM,oBAAiD,CAAC,EAAE,QAAQ,EAAE;IACzE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,mNAAU,EAAC,kBAAkB;IAEvD,qBACE,8OAAC,iBAAiB,QAAQ;QAAC,OAAO;YAAE;YAAO;QAAS;kBACjD;;;;;;AAGP"}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///Users/taisaitou/GeminiCLI/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0]}},
    {"offset": {"line": 131, "column": 0}, "map": {"version":3,"sources":["file:///Users/taisaitou/GeminiCLI/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}},
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":["file:///Users/taisaitou/GeminiCLI/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0]}}]
}