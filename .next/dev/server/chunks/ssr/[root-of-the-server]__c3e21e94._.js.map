{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///Users/taisaitou/GeminiCLI/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\n\nconst prismaClientSingleton = () => {\n  // Ensure DATABASE_URL is set. In Next.js, this is typically handled by\n  // environment variables loaded from .env.local, etc.\n  // If not set, PrismaClient will throw an error when trying to connect,\n  // which is preferable to an undefined 'prisma' object.\n  return new PrismaClient()\n}\n\ndeclare global {\n  var prismaGlobal: undefined | ReturnType<typeof prismaClientSingleton>\n}\n\nconst prisma = globalThis.prismaGlobal ?? prismaClientSingleton()\n\nexport default prisma\n\nif (process.env.NODE_ENV !== 'production') globalThis.prismaGlobal = prisma"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,wBAAwB;IAC5B,uEAAuE;IACvE,qDAAqD;IACrD,uEAAuE;IACvE,uDAAuD;IACvD,OAAO,IAAI,sMAAY;AACzB;AAMA,MAAM,SAAS,WAAW,YAAY,IAAI;uCAE3B;AAEf,wCAA2C,WAAW,YAAY,GAAG"}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["file:///Users/taisaitou/GeminiCLI/app/calorie/page.tsx"],"sourcesContent":["import prisma from '@/lib/prisma';\nimport Link from 'next/link';\n\nexport default async function CalorieDashboardPage() {\n  const today = new Date();\n  today.setHours(0, 0, 0, 0); // Set to start of today\n\n  const sevenDaysAgo = new Date(today);\n  sevenDaysAgo.setDate(today.getDate() - 7); // Set to start of 7 days ago\n\n  // Fetch today's meal logs\n  const todaysMeals = await prisma.mealLog.findMany({\n    where: {\n      date: {\n        gte: today,\n      },\n    },\n    select: {\n      calories: true,\n    },\n  });\n\n  const todaysCalories = todaysMeals.reduce((sum, meal) => sum + meal.calories, 0);\n\n  // Fetch past 7 days' meal logs (including today)\n  const past7DaysMeals = await prisma.mealLog.findMany({\n    where: {\n      date: {\n        gte: sevenDaysAgo,\n      },\n    },\n    select: {\n      calories: true,\n    },\n  });\n\n  const past7DaysCalories = past7DaysMeals.reduce((sum, meal) => sum + meal.calories, 0);\n\n  return (\n    <main className=\"p-8 max-w-4xl mx-auto\">\n      <h1 className=\"text-3xl font-bold mb-8\">カロリー記録アプリ - ダッシュボード</h1>\n      \n      <div className=\"bg-white rounded-lg shadow-md p-6 mb-8\">\n        <h2 className=\"text-2xl font-semibold mb-4\">本日のカロリー</h2>\n        <p className=\"text-xl\">登録済みカロリー: <span className=\"font-bold text-blue-600\">{todaysCalories} kcal</span></p>\n        {/* 目標カロリーを設定すれば「残りカロリー」も表示可能 */}\n        <p className=\"text-sm text-gray-500 mt-2\">※目標カロリー設定は設定画面で行えます。</p>\n      </div>\n\n      <div className=\"bg-white rounded-lg shadow-md p-6 mb-8\">\n        <h2 className=\"text-2xl font-semibold mb-4\">過去7日間の合計カロリー</h2>\n        <p className=\"text-xl\">合計: <span className=\"font-bold text-green-600\">{past7DaysCalories} kcal</span></p>\n      </div>\n\n      <div className=\"text-center mt-10\">\n        <Link href=\"/calorie/scan\" className=\"inline-block bg-indigo-600 text-white text-lg font-semibold px-8 py-4 rounded-lg hover:bg-indigo-700 transition duration-300 mb-4\">\n          <span className=\"mr-2\">📸</span> 写真を登録する\n        </Link>\n        <br />\n        <Link href=\"/calorie/scan?mode=train\" className=\"inline-block bg-purple-600 text-white text-lg font-semibold px-8 py-4 rounded-lg hover:bg-purple-700 transition duration-300\">\n          <span className=\"mr-2\">📈</span> 写真とカロリーを登録する (推定学習用)\n        </Link>\n      </div>\n\n      {/* TODO: ドーナツグラフ、ラインチャート、目標達成状況などを表示 */}\n    </main>\n  );\n}"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAEe,eAAe;IAC5B,MAAM,QAAQ,IAAI;IAClB,MAAM,QAAQ,CAAC,GAAG,GAAG,GAAG,IAAI,wBAAwB;IAEpD,MAAM,eAAe,IAAI,KAAK;IAC9B,aAAa,OAAO,CAAC,MAAM,OAAO,KAAK,IAAI,6BAA6B;IAExE,0BAA0B;IAC1B,MAAM,cAAc,MAAM,wHAAM,CAAC,OAAO,CAAC,QAAQ,CAAC;QAChD,OAAO;YACL,MAAM;gBACJ,KAAK;YACP;QACF;QACA,QAAQ;YACN,UAAU;QACZ;IACF;IAEA,MAAM,iBAAiB,YAAY,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,QAAQ,EAAE;IAE9E,iDAAiD;IACjD,MAAM,iBAAiB,MAAM,wHAAM,CAAC,OAAO,CAAC,QAAQ,CAAC;QACnD,OAAO;YACL,MAAM;gBACJ,KAAK;YACP;QACF;QACA,QAAQ;YACN,UAAU;QACZ;IACF;IAEA,MAAM,oBAAoB,eAAe,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,QAAQ,EAAE;IAEpF,qBACE,8OAAC;QAAK,WAAU;;0BACd,8OAAC;gBAAG,WAAU;0BAA0B;;;;;;0BAExC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAA8B;;;;;;kCAC5C,8OAAC;wBAAE,WAAU;;4BAAU;0CAAU,8OAAC;gCAAK,WAAU;;oCAA2B;oCAAe;;;;;;;;;;;;;kCAE3F,8OAAC;wBAAE,WAAU;kCAA6B;;;;;;;;;;;;0BAG5C,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAA8B;;;;;;kCAC5C,8OAAC;wBAAE,WAAU;;4BAAU;0CAAI,8OAAC;gCAAK,WAAU;;oCAA4B;oCAAkB;;;;;;;;;;;;;;;;;;;0BAG3F,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,0LAAI;wBAAC,MAAK;wBAAgB,WAAU;;0CACnC,8OAAC;gCAAK,WAAU;0CAAO;;;;;;4BAAS;;;;;;;kCAElC,8OAAC;;;;;kCACD,8OAAC,0LAAI;wBAAC,MAAK;wBAA2B,WAAU;;0CAC9C,8OAAC;gCAAK,WAAU;0CAAO;;;;;;4BAAS;;;;;;;;;;;;;;;;;;;AAO1C"}}]
}