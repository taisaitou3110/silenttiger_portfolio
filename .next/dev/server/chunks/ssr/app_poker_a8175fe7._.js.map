{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/taisaitou/GeminiCLI/app/poker/usePoker.tsx"],"sourcesContent":["\"use client\";\nimport { useState, useEffect } from 'react';\n\n// カードの強さ順（JOKERを最強に設定）\nconst CARD_TYPES = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A', 'JK'];\n\nexport function usePoker() {\n  const [gold, setGold] = useState(1000);\n  const [deck, setDeck] = useState<string[]>([]);\n  const [usedCards, setUsedCards] = useState<string[]>([]);\n  const [currentCard, setCurrentCard] = useState('');\n  const [nextCard, setNextCard] = useState('');\n  const [bet, setBet] = useState(0);\n  const [message, setMessage] = useState('100G はらって ゲームを はじめよう！');\n  const [gameState, setGameState] = useState<'IDLE' | 'PLAYING' | 'RESULT' | 'LOSE' | 'CLEAR'>('IDLE');\n\n  // 54枚の山札を生成する関数\n  const createFullDeck = () => {\n    const newDeck: string[] = [];\n    // 2〜Aまでを4枚ずつ追加\n    CARD_TYPES.slice(0, 13).forEach(type => {\n      for (let i = 0; i < 4; i++) newDeck.push(type);\n    });\n    // ジョーカーを2枚追加\n    newDeck.push('JK');\n    newDeck.push('JK');\n    return newDeck.sort(() => Math.random() - 0.5);\n  };\n\n  useEffect(() => {\n    if (deck.length === 0) {\n      setDeck(createFullDeck());\n    }\n  }, []);\n\n  const pullCard = (currentDeck: string[]) => {\n    let tempDeck = [...currentDeck];\n    if (tempDeck.length === 0) {\n      // 山札が切れたらその場で新しく生成\n      tempDeck = createFullDeck();\n      setUsedCards([]); \n      setMessage(\"山札が なくなったので あたらしく つくった！\");\n    }\n    const card = tempDeck.pop()!;\n    setDeck(tempDeck);\n    return card;\n  };\n\n  const startNewHand = () => {\n    if (gold < 100) return;\n    setGold(prev => prev - 100);\n    const card = pullCard(deck);\n    setCurrentCard(card);\n    setUsedCards(prev => [...prev, card]);\n    setBet(100);\n    setGameState('PLAYING');\n    setMessage(`スライムは ${card} をだした！ 上か？下か？`);\n  };\n\n  const handleGuess = (guess: 'HIGH' | 'LOW') => {\n    const newCard = pullCard(deck);\n    setNextCard(newCard);\n    setUsedCards(prev => [...prev, newCard]);\n    \n    const currentIndex = CARD_TYPES.indexOf(currentCard);\n    const nextIndex = CARD_TYPES.indexOf(newCard);\n    \n    if (currentIndex === nextIndex) {\n      setMessage(`引き分けだ！ ${currentCard} のまま やり直し！`);\n    } else if ((guess === 'HIGH' && nextIndex > currentIndex) || (guess === 'LOW' && nextIndex < currentIndex)) {\n      setBet(prev => prev * 2);\n      setMessage(`当たり！ 配当が ${bet * 2}G になった！`);\n      setGameState('RESULT');\n    } else {\n      setBet(0);\n      setGameState('LOSE');\n      setMessage(`残念！ 全てを失った… (${newCard} だった！)`);\n    }\n  };\n\n  const collect = () => {\n    const newTotal = gold + bet;\n    setGold(newTotal);\n    setBet(0);\n    if (newTotal >= 10000) {\n      setGameState('CLEAR');\n      setMessage(`10000G 到達！ おめでとう！ お前の完全勝利だ！`);\n    } else {\n      setGameState('IDLE');\n      setMessage(`${bet}G 獲得！ 次はどうする？`);\n    }\n  };\n\n  const continueGame = () => {\n    setCurrentCard(nextCard);\n    setNextCard('');\n    setGameState('PLAYING');\n    setMessage(`${nextCard} より 上か？下か？`);\n  };\n\n  const fullReset = () => {\n    setGold(1000);\n    setDeck(createFullDeck());\n    setUsedCards([]);\n    setBet(0);\n    setGameState('IDLE');\n    setMessage('100G はらって ゲームを はじめよう！');\n  };\n\n  return {\n    gold, deck, usedCards, currentCard, nextCard, bet, message, gameState,\n    startNewHand, handleGuess, collect, continueGame, fullReset, CARD_TYPES\n  };\n}"],"names":[],"mappings":";;;;AACA;AADA;;AAGA,uBAAuB;AACvB,MAAM,aAAa;IAAC;IAAK;IAAK;IAAK;IAAK;IAAK;IAAK;IAAK;IAAK;IAAM;IAAK;IAAK;IAAK;IAAK;CAAK;AAEpF,SAAS;IACd,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAW,EAAE;IAC7C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAW,EAAE;IACvD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,iNAAQ,EAAC;IAC/B,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAmD;IAE7F,gBAAgB;IAChB,MAAM,iBAAiB;QACrB,MAAM,UAAoB,EAAE;QAC5B,eAAe;QACf,WAAW,KAAK,CAAC,GAAG,IAAI,OAAO,CAAC,CAAA;YAC9B,IAAK,IAAI,IAAI,GAAG,IAAI,GAAG,IAAK,QAAQ,IAAI,CAAC;QAC3C;QACA,aAAa;QACb,QAAQ,IAAI,CAAC;QACb,QAAQ,IAAI,CAAC;QACb,OAAO,QAAQ,IAAI,CAAC,IAAM,KAAK,MAAM,KAAK;IAC5C;IAEA,IAAA,kNAAS,EAAC;QACR,IAAI,KAAK,MAAM,KAAK,GAAG;YACrB,QAAQ;QACV;IACF,GAAG,EAAE;IAEL,MAAM,WAAW,CAAC;QAChB,IAAI,WAAW;eAAI;SAAY;QAC/B,IAAI,SAAS,MAAM,KAAK,GAAG;YACzB,mBAAmB;YACnB,WAAW;YACX,aAAa,EAAE;YACf,WAAW;QACb;QACA,MAAM,OAAO,SAAS,GAAG;QACzB,QAAQ;QACR,OAAO;IACT;IAEA,MAAM,eAAe;QACnB,IAAI,OAAO,KAAK;QAChB,QAAQ,CAAA,OAAQ,OAAO;QACvB,MAAM,OAAO,SAAS;QACtB,eAAe;QACf,aAAa,CAAA,OAAQ;mBAAI;gBAAM;aAAK;QACpC,OAAO;QACP,aAAa;QACb,WAAW,CAAC,MAAM,EAAE,KAAK,aAAa,CAAC;IACzC;IAEA,MAAM,cAAc,CAAC;QACnB,MAAM,UAAU,SAAS;QACzB,YAAY;QACZ,aAAa,CAAA,OAAQ;mBAAI;gBAAM;aAAQ;QAEvC,MAAM,eAAe,WAAW,OAAO,CAAC;QACxC,MAAM,YAAY,WAAW,OAAO,CAAC;QAErC,IAAI,iBAAiB,WAAW;YAC9B,WAAW,CAAC,OAAO,EAAE,YAAY,UAAU,CAAC;QAC9C,OAAO,IAAI,AAAC,UAAU,UAAU,YAAY,gBAAkB,UAAU,SAAS,YAAY,cAAe;YAC1G,OAAO,CAAA,OAAQ,OAAO;YACtB,WAAW,CAAC,SAAS,EAAE,MAAM,EAAE,OAAO,CAAC;YACvC,aAAa;QACf,OAAO;YACL,OAAO;YACP,aAAa;YACb,WAAW,CAAC,aAAa,EAAE,QAAQ,MAAM,CAAC;QAC5C;IACF;IAEA,MAAM,UAAU;QACd,MAAM,WAAW,OAAO;QACxB,QAAQ;QACR,OAAO;QACP,IAAI,YAAY,OAAO;YACrB,aAAa;YACb,WAAW,CAAC,2BAA2B,CAAC;QAC1C,OAAO;YACL,aAAa;YACb,WAAW,GAAG,IAAI,aAAa,CAAC;QAClC;IACF;IAEA,MAAM,eAAe;QACnB,eAAe;QACf,YAAY;QACZ,aAAa;QACb,WAAW,GAAG,SAAS,UAAU,CAAC;IACpC;IAEA,MAAM,YAAY;QAChB,QAAQ;QACR,QAAQ;QACR,aAAa,EAAE;QACf,OAAO;QACP,aAAa;QACb,WAAW;IACb;IAEA,OAAO;QACL;QAAM;QAAM;QAAW;QAAa;QAAU;QAAK;QAAS;QAC5D;QAAc;QAAa;QAAS;QAAc;QAAW;IAC/D;AACF"}},
    {"offset": {"line": 149, "column": 0}, "map": {"version":3,"sources":["file:///Users/taisaitou/GeminiCLI/app/poker/page.tsx"],"sourcesContent":["\"use client\";\nimport React from 'react';\nimport { usePoker } from './usePoker';\n\nexport default function PokerPage() {\n  const {\n    gold, deck, usedCards, currentCard, nextCard, bet, message, gameState,\n    startNewHand, handleGuess, collect, continueGame, fullReset, CARD_TYPES\n  } = usePoker();\n\n  return (\n    <div className=\"min-h-screen bg-black text-white p-4 font-mono select-none flex flex-col lg:flex-row gap-6 justify-center items-start max-w-7xl mx-auto\">\n      \n      {/* メインゲームエリア (幅 約2/3) */}\n      <div className=\"w-full lg:w-2/3\">\n        {/* ステータスウィンドウ */}\n        <div className=\"border-4 border-white p-4 mb-4 bg-blue-900 shadow-[4px_4px_0_0_rgba(255,255,255,1)]\">\n          <div className=\"flex justify-between items-center\">\n            <span className=\"text-2xl font-bold text-yellow-400 font-serif tracking-tighter\">GOLD: {gold}G</span>\n            <span className=\"text-xs opacity-50 font-bold\">山札残り: {deck.length} / 54枚</span>\n          </div>\n          {bet > 0 && (\n            <div className=\"text-red-400 mt-2 animate-pulse text-lg font-bold text-center border-t border-white/20 pt-2\">\n              現在の配当: {bet}G\n            </div>\n          )}\n        </div>\n\n        {/* メッセージウィンドウ */}\n        <div className=\"border-4 border-white p-6 bg-blue-900 min-h-[120px] flex items-center mb-8 relative shadow-[4px_4px_0_0_rgba(255,255,255,1)]\">\n          <p className=\"text-xl leading-relaxed font-bold\">➤ {message}</p>\n          <div className=\"absolute bottom-2 right-4 animate-bounce text-xs opacity-50\">▼</div>\n        </div>\n\n        {/* カード表示エリア */}\n        <div className=\"flex justify-center gap-10 mb-12\">\n          <CardDisplay value={currentCard} label=\"いま\" />\n          <CardDisplay \n            value={(gameState === 'RESULT' || gameState === 'LOSE') ? nextCard : '?'} \n            label=\"つぎ\" \n          />\n        </div>\n\n        {/* 操作コマンド */}\n        <div className=\"space-y-3 max-w-sm mx-auto\">\n          {/* ゲーム開始前、または負けた後 */}\n          {(gameState === 'IDLE' || gameState === 'LOSE') && gold >= 100 && (\n            <>\n              <MenuButton onClick={startNewHand}>ぼうけんに でる (100G)</MenuButton>\n              <MenuButton onClick={() => window.location.href = '/'}>ゲームを やめる</MenuButton>\n            </>\n          )}\n\n          {/* 破産時 */}\n          {gold < 100 && gameState !== 'PLAYING' && gameState !== 'RESULT' && (\n             <MenuButton onClick={fullReset}>復活の呪文を となえる (リセット)</MenuButton>\n          )}\n\n          {/* HIGH/LOW 選択中 */}\n          {gameState === 'PLAYING' && (\n            <div className=\"grid grid-cols-2 gap-4\">\n              <MenuButton onClick={() => handleGuess('HIGH')}>HIGH (上)</MenuButton>\n              <MenuButton onClick={() => handleGuess('LOW')}>LOW (下)</MenuButton>\n            </div>\n          )}\n\n          {/* 当たり判定後 */}\n          {gameState === 'RESULT' && (\n            <div className=\"flex flex-col gap-3\">\n              <MenuButton onClick={continueGame} highlight>ダブルアップに いどむ</MenuButton>\n              <MenuButton onClick={collect}>ゴールドを かいしゅう</MenuButton>\n            </div>\n          )}\n\n          {/* 10,000G クリア時 */}\n          {gameState === 'CLEAR' && (\n            <MenuButton onClick={fullReset}>➤ 伝説の勇者として 戻る</MenuButton>\n          )}\n        </div>\n      </div>\n\n      {/* 右側：履歴エリア (54枚対応版) */}\n      <div className=\"w-full lg:w-80 border-4 border-white p-4 bg-blue-900 shadow-[4px_4px_0_0_rgba(255,255,255,1)] self-stretch lg:self-start\">\n        <h3 className=\"text-yellow-400 text-lg mb-4 border-b-2 border-white pb-2 font-bold text-center italic tracking-widest\">\n          でたカード記録\n        </h3>\n        <div className=\"space-y-1\">\n          {CARD_TYPES.map(type => {\n            const count = usedCards.filter(c => c === type).length;\n            const max = type === 'JK' ? 2 : 4;\n            const hasAppeared = count > 0;\n            \n            return (\n              <div key={type} className={`flex justify-between items-center px-2 py-1 border-b border-white/10 transition-all duration-300 ${hasAppeared ? 'text-white' : 'opacity-20 text-gray-500'}`}>\n                <span className=\"font-bold w-8\">{type}</span>\n                {/* 履歴のドット表示 */}\n                <div className=\"flex gap-1 flex-1 justify-center\">\n                  {[...Array(max)].map((_, i) => (\n                    <div \n                      key={i} \n                      className={`w-3 h-3 border transition-colors ${\n                        i < count \n                          ? 'bg-yellow-400 border-yellow-400 shadow-[0_0_5px_rgba(255,255,0,0.5)]' \n                          : 'border-white/30'\n                      }`} \n                    />\n                  ))}\n                </div>\n                <span className={`text-xs ml-2 w-6 text-right ${hasAppeared ? 'text-yellow-400' : ''}`}>\n                  {count}\n                </span>\n              </div>\n            );\n          })}\n        </div>\n        {gold <= 0 && (gameState === 'IDLE' || gameState === 'LOSE') && (\n          <div className=\"mt-6 p-2 border-2 border-red-500 text-red-500 text-center animate-pulse font-bold text-xs\">\n            破産しました...\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n// --- サポートコンポーネント ---\n\nfunction CardDisplay({ value, label }: { value: string, label: string }) {\n  const isBack = value === '?' || value === '';\n  const isJoker = value === 'JK';\n  return (\n    <div className=\"text-center\">\n      <div className=\"text-xs mb-2 text-gray-400 font-bold uppercase tracking-widest\">{label}</div>\n      <div className={`w-24 h-36 md:w-32 md:h-48 rounded-xl flex items-center justify-center text-4xl md:text-5xl font-bold border-4 shadow-2xl transition-all duration-300 transform ${isBack ? 'bg-blue-700 border-white text-white' : 'bg-white text-black border-gray-400'} ${isJoker ? 'text-red-600 ring-4 ring-red-600' : ''}`}>\n        {value}\n      </div>\n    </div>\n  );\n}\n\nfunction MenuButton({ children, onClick, highlight = false }: { children: React.ReactNode, onClick: () => void, highlight?: boolean }) {\n  return (\n    <button \n      onClick={onClick} \n      className={`w-full text-left px-6 py-4 border-2 border-transparent hover:border-white group flex items-center transition-all duration-75 bg-blue-900/40 hover:bg-blue-800 ${highlight ? 'text-yellow-400' : 'text-white'}`}\n    >\n      <span className=\"opacity-0 group-hover:opacity-100 mr-3 font-bold text-2xl transition-transform transform translate-x-[-4px] group-hover:translate-x-0\">➤</span>\n      <span className=\"text-xl font-bold tracking-tight\">{children}</span>\n    </button>\n  );\n}"],"names":[],"mappings":"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"}}]
}