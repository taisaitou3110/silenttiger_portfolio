{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/taisaitou/GeminiCLI/app/poker/usePoker.tsx"],"sourcesContent":["\"use client\";\nimport { useState, useEffect } from 'react';\n\n// カードの強さ順（JOKERを最強に設定）\nconst CARD_TYPES = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A', 'JK'];\n\nexport function usePoker(initialGold: number = 5000, initialBet: number = 100) {\n  const [gold, setGold] = useState(initialGold);\n  const [startGold, setStartGold] = useState(initialGold); // To keep track of the chosen starting gold for reset\n  const [currentBetAmount, setCurrentBetAmount] = useState(initialBet); // To keep track of the chosen initial bet\n  const [deck, setDeck] = useState<string[]>([]);\n  const [usedCards, setUsedCards] = useState<string[]>([]);\n  const [currentCard, setCurrentCard] = useState('');\n  const [nextCard, setNextCard] = useState('');\n  const [bet, setBet] = useState(0);\n  const [message, setMessage] = useState('100G はらって ゲームを はじめよう！');\n  const [gameState, setGameState] = useState<'IDLE' | 'PLAYING' | 'RESULT' | 'LOSE' | 'CLEAR'>('IDLE');\n\n  // 54枚の山札を生成する関数\n  const createFullDeck = () => {\n    const newDeck: string[] = [];\n    // 2〜Aまでを4枚ずつ追加\n    CARD_TYPES.slice(0, 13).forEach(type => {\n      for (let i = 0; i < 4; i++) newDeck.push(type);\n    });\n    // ジョーカーを2枚追加\n    newDeck.push('JK');\n    newDeck.push('JK');\n    return newDeck.sort(() => Math.random() - 0.5);\n  };\n\n  useEffect(() => {\n    if (deck.length === 0) {\n      setDeck(createFullDeck());\n    }\n  }, []);\n\n  const pullCard = (currentDeck: string[]) => {\n    let tempDeck = [...currentDeck];\n    if (tempDeck.length === 0) {\n      // 山札が切れたらその場で新しく生成\n      tempDeck = createFullDeck();\n      setUsedCards([]); \n      setMessage(\"山札が なくなったので あたらしく つくった！\");\n    }\n    const card = tempDeck.pop()!;\n    setDeck(tempDeck);\n    return card;\n  };\n\n  const startNewHand = () => {\n    if (gold < currentBetAmount) return; // Use currentBetAmount\n    setGold(prev => prev - currentBetAmount); // Deduct currentBetAmount\n    const card = pullCard(deck);\n    setCurrentCard(card);\n    setUsedCards(prev => [...prev, card]);\n    setBet(currentBetAmount); // Set bet to currentBetAmount\n    setGameState('PLAYING');\n    setMessage(`スライムは ${card} をだした！ 上か？下か？`);\n  };\n\n  const handleGuess = (guess: 'HIGH' | 'LOW') => {\n    const newCard = pullCard(deck);\n    setNextCard(newCard);\n    setUsedCards(prev => [...prev, newCard]);\n    \n    const currentIndex = CARD_TYPES.indexOf(currentCard);\n    const nextIndex = CARD_TYPES.indexOf(newCard);\n    \n    if (currentIndex === nextIndex) {\n      setMessage(`引き分けだ！ ${currentCard} のまま やり直し！`);\n    } else if ((guess === 'HIGH' && nextIndex > currentIndex) || (guess === 'LOW' && nextIndex < currentIndex)) {\n      setBet(prev => prev * 2);\n      setMessage(`当たり！ 配当が ${bet * 2}G になった！`);\n      setGameState('RESULT');\n    } else {\n      setBet(0);\n      setGameState('LOSE');\n      setMessage(`残念！ 全てを失った… (${newCard} だった！)`);\n    }\n  };\n\n  const collect = () => {\n    const newTotal = gold + bet;\n    setGold(newTotal);\n    setBet(0);\n    if (newTotal >= 10000) {\n      setGameState('CLEAR');\n      setMessage(`10000G 到達！ おめでとう！ お前の完全勝利だ！`);\n    } else {\n      setGameState('IDLE');\n      setMessage(`${bet}G 獲得！ 次はどうする？`);\n    }\n  };\n\n  const continueGame = () => {\n    setCurrentCard(nextCard);\n    setNextCard('');\n    setGameState('PLAYING');\n    setMessage(`${nextCard} より 上か？下か？`);\n  };\n\n  const fullReset = () => {\n    setGold(startGold); // Reset to startGold\n    setDeck(createFullDeck());\n    setUsedCards([]);\n    setBet(0);\n    setGameState('IDLE');\n    setMessage(`${currentBetAmount}G はらって ゲームを はじめよう！`); // Update message\n  };\n\n  return {\n    gold, deck, usedCards, currentCard, nextCard, bet, message, gameState,\n    startNewHand, handleGuess, collect, continueGame, fullReset, CARD_TYPES,\n    startGold, setStartGold, currentBetAmount, setCurrentBetAmount\n  };\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 163, "column": 0}, "map": {"version":3,"sources":["file:///Users/taisaitou/GeminiCLI/app/poker/actions.ts"],"sourcesContent":["\"use server\";\n\nimport prisma from \"@/lib/prisma\";\nimport { revalidatePath } from \"next/cache\";\n\nexport async function addAchiever(name: string, gold: number) {\n  // Validate name: 4 uppercase alphabetic characters\n  if (!/^[A-Z]{1,4}$/.test(name)) {\n    return { error: \"Name must be 1 to 4 uppercase alphabetic characters.\" };\n  }\n\n  // Enforce gold cap\n  let cappedGold = gold;\n  if (cappedGold > 65535) {\n    cappedGold = 65535;\n  }\n  if (cappedGold < 0) { // Also ensure non-negative\n      cappedGold = 0;\n  }\n\n  try {\n    const newAchiever = await prisma.pokerAchiever.create({\n      data: {\n        name,\n        finalGold: cappedGold, // Use the capped gold value\n      },\n    });\n    revalidatePath(\"/poker\"); // Revalidate the poker page to show updated ranking\n    return { success: true, data: newAchiever };\n  } catch (error: any) {\n    if (error.code === 'P2002') { // Unique constraint violation\n      return { error: `Achiever with name '${name}' already exists.` };\n    }\n    console.error(\"Error adding poker achiever:\", error);\n    return { error: \"Failed to add achiever.\" };\n  }\n}\n\nexport async function getAchievers() {\n  try {\n    const achievers = await prisma.pokerAchiever.findMany({\n      orderBy: {\n        achievedAt: \"asc\", // Order by achievement date, oldest first\n      },\n      take: 10, // Get top 10 achievers, adjust as needed\n    });\n    return { success: true, data: achievers };\n  } catch (error) {\n    console.error(\"Error fetching poker achievers:\", error);\n    return { error: \"Failed to fetch achievers.\" };\n  }\n}"],"names":[],"mappings":";;;;;;;MAKsB,wBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA,+CAAA"}},
    {"offset": {"line": 180, "column": 0}, "map": {"version":3,"sources":["file:///Users/taisaitou/GeminiCLI/app/poker/actions.ts"],"sourcesContent":["\"use server\";\n\nimport prisma from \"@/lib/prisma\";\nimport { revalidatePath } from \"next/cache\";\n\nexport async function addAchiever(name: string, gold: number) {\n  // Validate name: 4 uppercase alphabetic characters\n  if (!/^[A-Z]{1,4}$/.test(name)) {\n    return { error: \"Name must be 1 to 4 uppercase alphabetic characters.\" };\n  }\n\n  // Enforce gold cap\n  let cappedGold = gold;\n  if (cappedGold > 65535) {\n    cappedGold = 65535;\n  }\n  if (cappedGold < 0) { // Also ensure non-negative\n      cappedGold = 0;\n  }\n\n  try {\n    const newAchiever = await prisma.pokerAchiever.create({\n      data: {\n        name,\n        finalGold: cappedGold, // Use the capped gold value\n      },\n    });\n    revalidatePath(\"/poker\"); // Revalidate the poker page to show updated ranking\n    return { success: true, data: newAchiever };\n  } catch (error: any) {\n    if (error.code === 'P2002') { // Unique constraint violation\n      return { error: `Achiever with name '${name}' already exists.` };\n    }\n    console.error(\"Error adding poker achiever:\", error);\n    return { error: \"Failed to add achiever.\" };\n  }\n}\n\nexport async function getAchievers() {\n  try {\n    const achievers = await prisma.pokerAchiever.findMany({\n      orderBy: {\n        achievedAt: \"asc\", // Order by achievement date, oldest first\n      },\n      take: 10, // Get top 10 achievers, adjust as needed\n    });\n    return { success: true, data: achievers };\n  } catch (error) {\n    console.error(\"Error fetching poker achievers:\", error);\n    return { error: \"Failed to fetch achievers.\" };\n  }\n}"],"names":[],"mappings":";;;;;;;MAsCsB,wBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA,gDAAA"}},
    {"offset": {"line": 197, "column": 0}, "map": {"version":3,"sources":["file:///Users/taisaitou/GeminiCLI/app/poker/page.tsx"],"sourcesContent":["\"use client\";\nimport React, { useEffect, useState } from 'react'; // Import useEffect and useState\nimport { usePoker } from './usePoker';\nimport { addAchiever, getAchievers } from './actions'; // Import the new actions\n\n// Define a type for Achiever for better type safety\ninterface Achiever {\n  id: string;\n  name: string;\n  finalGold: number;\n  achievedAt: string; // Assuming it's returned as a string\n}\n\nexport default function PokerPage() {\n  const [selectedStartGold, setSelectedStartGold] = useState(5000); // Default to 5000G\n  const [selectedInitialBet, setSelectedInitialBet] = useState(100); // Default to 100G\n\n  const {\n    gold, deck, usedCards, currentCard, nextCard, bet, message, gameState,\n    startNewHand, handleGuess, collect, continueGame, fullReset, CARD_TYPES,\n    startGold, setStartGold, currentBetAmount, setCurrentBetAmount // Destructure setters\n  } = usePoker(selectedStartGold, selectedInitialBet); // Pass selected values\n\n  const [achievers, setAchievers] = useState<Achiever[]>([]);\n  const [achieverNameInput, setAchieverNameInput] = useState('');\n  const [submitMessage, setSubmitMessage] = useState('');\n\n  useEffect(() => {\n    const fetchAchievers = async () => {\n      const result = await getAchievers();\n      if (result.success && result.data) { // Ensure data exists\n        setAchievers(result.data);\n      } else {\n        console.error(\"Failed to fetch achievers:\", result.error);\n      }\n    };\n    fetchAchievers();\n  }, []); // Empty dependency array means this runs once on mount\n\n  const handleSubmitAchiever = async () => {\n    setSubmitMessage('Submitting...');\n    // Basic client-side validation before sending to server action\n    if (!/^[A-Z]{1,4}$/.test(achieverNameInput)) {\n      setSubmitMessage('Error: Name must be 1 to 4 uppercase alphabetic characters.');\n      return;\n    }\n\n    const result = await addAchiever(achieverNameInput.toUpperCase(), gold); // Pass 'gold' here\n    if (result.success && result.data) { // Ensure data exists\n      setSubmitMessage('Successfully registered!');\n      // Update local state and sort by achievedAt for display\n      setAchievers(prev => \n        [...prev, result.data].sort((a, b) => \n          new Date(a.achievedAt).getTime() - new Date(b.achievedAt).getTime()\n        )\n      );\n      setAchieverNameInput(''); // Clear input\n    } else {\n      setSubmitMessage(`Error: ${result.error}`);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-black text-white p-4 font-mono select-none flex flex-col lg:flex-row gap-6 justify-center items-start max-w-7xl mx-auto\">\n      \n      {/* メインゲームエリア (幅 約2/3) */}\n      <div className=\"w-full lg:w-2/3\">\n        {/* ステータスウィンドウ */}\n        <div className=\"border-4 border-white p-4 mb-4 bg-blue-900 shadow-[4px_4px_0_0_rgba(255,255,255,1)]\">\n          <div className=\"flex justify-between items-center\">\n            <span className=\"text-2xl font-bold text-yellow-400 font-serif tracking-tighter\">GOLD: {gold}G</span>\n            <span className=\"text-xs opacity-50 font-bold\">山札残り: {deck.length} / 54枚</span>\n          </div>\n          {bet > 0 && (\n            <div className=\"text-red-400 mt-2 animate-pulse text-lg font-bold text-center border-t border-white/20 pt-2\">\n              現在の配当: {bet}G\n            </div>\n          )}\n        </div>\n\n        {/* メッセージウィンドウ */}\n        <div className=\"border-4 border-white p-6 bg-blue-900 min-h-[120px] flex items-center mb-8 relative shadow-[4px_4px_0_0_rgba(255,255,255,1)]\">\n          <p className=\"text-xl leading-relaxed font-bold\">➤ {message}</p>\n          <div className=\"absolute bottom-2 right-4 animate-bounce text-xs opacity-50\">▼</div>\n        </div>\n\n        {/* カード表示エリア */}\n        <div className=\"flex justify-center gap-10 mb-12\">\n          <CardDisplay value={currentCard} label=\"いま\" />\n          <CardDisplay \n            value={(gameState === 'RESULT' || gameState === 'LOSE') ? nextCard : '?'} \n            label=\"つぎ\" \n          />\n        </div>\n\n        {/* 操作コマンド */}\n        <div className=\"space-y-3 max-w-sm mx-auto\">\n          {/* ゲーム開始前、または負けた後 */}\n          {(gameState === 'IDLE' || gameState === 'LOSE') && gold >= selectedInitialBet && ( // Use selectedInitialBet here\n            <>\n              {/* Start Gold Selection */}\n              <div className=\"space-y-2\">\n                <h4 className=\"text-yellow-400 font-bold text-center\">開始ゴールドを選択:</h4>\n                <div className=\"flex justify-center gap-4\">\n                  {[5000, 2000, 500].map(amount => (\n                    <MenuButton \n                      key={amount} \n                      onClick={() => {\n                        setSelectedStartGold(amount);\n                        setStartGold(amount); // Update usePoker's internal state\n                      }}\n                      highlight={selectedStartGold === amount}\n                    >\n                      {amount}G\n                    </MenuButton>\n                  ))}\n                </div>\n              </div>\n\n              {/* Initial Bet Selection */}\n              <div className=\"space-y-2 mt-4\">\n                <h4 className=\"text-yellow-400 font-bold text-center\">初回ベット額を選択:</h4>\n                <div className=\"flex justify-center gap-4\">\n                  {[100, 500, 1000].map(amount => (\n                    <MenuButton \n                      key={amount} \n                      onClick={() => {\n                        setSelectedInitialBet(amount);\n                        setCurrentBetAmount(amount); // Update usePoker's internal state\n                      }}\n                      highlight={selectedInitialBet === amount}\n                    >\n                      {amount}G\n                    </MenuButton>\n                  ))}\n                </div>\n              </div>\n\n              <MenuButton onClick={startNewHand}>ぼうけんに でる ({currentBetAmount}G)</MenuButton> {/* Use currentBetAmount */}\n              <MenuButton onClick={() => window.location.href = '/'}>ゲームを やめる</MenuButton>\n            </>\n          )}\n\n          {/* 破産時 */}\n          {gold < selectedInitialBet && gameState !== 'PLAYING' && gameState !== 'RESULT' && ( // Use selectedInitialBet here\n             <MenuButton onClick={fullReset}>復活の呪文を となえる (リセット)</MenuButton>\n          )}\n\n          {/* HIGH/LOW 選択中 */}\n          {gameState === 'PLAYING' && (\n            <div className=\"grid grid-cols-2 gap-4\">\n              <MenuButton onClick={() => handleGuess('HIGH')}>HIGH (上)</MenuButton>\n              <MenuButton onClick={() => handleGuess('LOW')}>LOW (下)</MenuButton>\n            </div>\n          )}\n\n          {/* 当たり判定後 */}\n          {gameState === 'RESULT' && (\n            <div className=\"flex flex-col gap-3\">\n              <MenuButton onClick={continueGame} highlight>ダブルアップに いどむ</MenuButton>\n              <MenuButton onClick={collect}>ゴールドを かいしゅう</MenuButton>\n            </div>\n          )}\n\n          {/* 10,000G クリア時 */}\n          {gameState === 'CLEAR' && (\n            <div className=\"flex flex-col gap-3\">\n              <div className=\"border-4 border-yellow-400 p-4 bg-yellow-900 text-yellow-50 text-center font-bold text-xl mb-4 shadow-[4px_4px_0_0_rgba(252,211,77,1)]\">\n                10000G 達成おめでとう！\n              </div>\n              <input\n                type=\"text\"\n                placeholder=\"名前 (4文字以内, 大文字英字)\"\n                className=\"w-full p-3 bg-gray-700 text-white border-2 border-gray-600 focus:border-yellow-400 outline-none uppercase text-center\"\n                maxLength={4}\n                value={achieverNameInput}\n                onChange={(e) => setAchieverNameInput(e.target.value.toUpperCase())}\n              />\n              <MenuButton onClick={handleSubmitAchiever} highlight>\n                ランキングに登録\n              </MenuButton>\n              {submitMessage && <p className=\"text-center text-sm mt-2\">{submitMessage}</p>}\n              <MenuButton onClick={fullReset}>➤ 伝説の勇者として 戻る</MenuButton>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* 右側：履歴エリア + ランキングエリア (幅 約1/3) */}\n      <div className=\"w-full lg:w-1/3 flex flex-col gap-6\">\n        {/* 履歴エリア */}\n        <div className=\"border-4 border-white p-4 bg-blue-900 shadow-[4px_4px_0_0_rgba(255,255,255,1)]\">\n          <h3 className=\"text-yellow-400 text-lg mb-4 border-b-2 border-white pb-2 font-bold text-center italic tracking-widest\">\n            でたカード記録\n          </h3>\n          <div className=\"space-y-1\">\n            {CARD_TYPES.map(type => {\n              const count = usedCards.filter(c => c === type).length;\n              const max = type === 'JK' ? 2 : 4;\n              const hasAppeared = count > 0;\n              \n              return (\n                <div key={type} className={`flex justify-between items-center px-2 py-1 border-b border-white/10 transition-all duration-300 ${hasAppeared ? 'text-white' : 'opacity-20 text-gray-500'}`}>\n                  <span className=\"font-bold w-8\">{type}</span>\n                  {/* 履歴のドット表示 */}\n                  <div className=\"flex gap-1 flex-1 justify-center\">\n                    {[...Array(max)].map((_, i) => (\n                      <div \n                        key={i} \n                        className={`w-3 h-3 border transition-colors ${\n                          i < count \n                            ? 'bg-yellow-400 border-yellow-400 shadow-[0_0_5px_rgba(255,255,0,0.5)]' \n                            : 'border-white/30'\n                        }`} \n                      />\n                    ))}\n                  </div>\n                  <span className={`text-xs ml-2 w-6 text-right ${hasAppeared ? 'text-yellow-400' : ''}`}>\n                    {count}\n                  </span>\n                </div>\n              );\n            })}\n          </div>\n          {gold <= 0 && (gameState === 'IDLE' || gameState === 'LOSE') && (\n            <div className=\"mt-6 p-2 border-2 border-red-500 text-red-500 text-center animate-pulse font-bold text-xs\">\n              破産しました...\n            </div>\n          )}\n        </div>\n\n        {/* ランキングエリア */}\n        <div className=\"border-4 border-white p-4 bg-blue-900 shadow-[4px_4px_0_0_rgba(255,255,255,1)] self-stretch\">\n          <h3 className=\"text-yellow-400 text-lg mb-4 border-b-2 border-white pb-2 font-bold text-center italic tracking-widest\">\n            10000G 達成者ランキング\n          </h3>\n          {achievers.length === 0 ? (\n            <p className=\"text-center text-gray-400\">まだ達成者はいません。</p>\n          ) : (\n            <ol className=\"list-decimal list-inside space-y-1\">\n              {achievers.map((achiever, index) => (\n                <li key={achiever.id} className=\"flex justify-between items-center py-1 border-b border-white/10 last:border-b-0\">\n                  <span className=\"font-bold text-lg\">{index + 1}. {achiever.name}</span>\n                  <span className=\"text-yellow-400 text-base\">{achiever.finalGold}G</span>\n                  <span className=\"text-sm text-gray-400 ml-2\">\n                    {/* Display date with time and minutes */}\n                    {new Date(achiever.achievedAt).toLocaleString('ja-JP', { // Using 'ja-JP' for locale, can be changed\n                        year: 'numeric',\n                        month: 'numeric',\n                        day: 'numeric',\n                        hour: '2-digit',\n                        minute: '2-digit',\n                        hour12: false // 24-hour format\n                    })}\n                  </span>\n                </li>\n              ))}\n            </ol>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// --- サポートコンポーネント ---\n\nfunction CardDisplay({ value, label }: { value: string, label: string }) {\n  const isBack = value === '?' || value === '';\n  const isJoker = value === 'JK';\n  return (\n    <div className=\"text-center\">\n      <div className=\"text-xs mb-2 text-gray-400 font-bold uppercase tracking-widest\">{label}</div>\n      <div className={`w-24 h-36 md:w-32 md:h-48 rounded-xl flex items-center justify-center text-4xl md:text-5xl font-bold border-4 shadow-2xl transition-all duration-300 transform ${isBack ? 'bg-blue-700 border-white text-white' : 'bg-white text-black border-gray-400'} ${isJoker ? 'text-red-600 ring-4 ring-red-600' : ''}`}>\n        {value}\n      </div>\n    </div>\n  );\n}\n\nfunction MenuButton({ children, onClick, highlight = false }: { children: React.ReactNode, onClick: () => void, highlight?: boolean }) {\n  return (\n    <button \n      onClick={onClick} \n      className={`w-full text-left px-6 py-4 border-2 border-transparent hover:border-white group flex items-center transition-all duration-75 bg-blue-900/40 hover:bg-blue-800 ${highlight ? 'text-yellow-400' : 'text-white'}`}\n    >\n      <span className=\"opacity-0 group-hover:opacity-100 mr-3 font-bold text-2xl transition-transform transform translate-x-[-4px] group-hover:translate-x-0\">➤</span>\n      <span className=\"text-xl font-bold tracking-tight\">{children}</span>\n    </button>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA,mRAAoD,gCAAgC;AACpF;AACA,sQAAuD,yBAAyB;AAAhF;;;AAHA;;;;AAae,SAAS;;IACtB,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,yKAAQ,EAAC,OAAO,mBAAmB;IACrF,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,yKAAQ,EAAC,MAAM,kBAAkB;IAErF,MAAM,EACJ,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE,WAAW,EAAE,QAAQ,EAAE,GAAG,EAAE,OAAO,EAAE,SAAS,EACrE,YAAY,EAAE,WAAW,EAAE,OAAO,EAAE,YAAY,EAAE,SAAS,EAAE,UAAU,EACvE,SAAS,EAAE,YAAY,EAAE,gBAAgB,EAAE,mBAAmB,AAAC,sBAAsB;MACtF,GAAG,IAAA,wIAAQ,EAAC,mBAAmB,qBAAqB,uBAAuB;IAE5E,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAa,EAAE;IACzD,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,yKAAQ,EAAC;IAC3D,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAC;IAEnD,IAAA,0KAAS;+BAAC;YACR,MAAM;sDAAiB;oBACrB,MAAM,SAAS,MAAM,IAAA,uKAAY;oBACjC,IAAI,OAAO,OAAO,IAAI,OAAO,IAAI,EAAE;wBACjC,aAAa,OAAO,IAAI;oBAC1B,OAAO;wBACL,QAAQ,KAAK,CAAC,8BAA8B,OAAO,KAAK;oBAC1D;gBACF;;YACA;QACF;8BAAG,EAAE,GAAG,uDAAuD;IAE/D,MAAM,uBAAuB;QAC3B,iBAAiB;QACjB,+DAA+D;QAC/D,IAAI,CAAC,eAAe,IAAI,CAAC,oBAAoB;YAC3C,iBAAiB;YACjB;QACF;QAEA,MAAM,SAAS,MAAM,IAAA,sKAAW,EAAC,kBAAkB,WAAW,IAAI,OAAO,mBAAmB;QAC5F,IAAI,OAAO,OAAO,IAAI,OAAO,IAAI,EAAE;YACjC,iBAAiB;YACjB,wDAAwD;YACxD,aAAa,CAAA,OACX;uBAAI;oBAAM,OAAO,IAAI;iBAAC,CAAC,IAAI,CAAC,CAAC,GAAG,IAC9B,IAAI,KAAK,EAAE,UAAU,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,UAAU,EAAE,OAAO;YAGrE,qBAAqB,KAAK,cAAc;QAC1C,OAAO;YACL,iBAAiB,CAAC,OAAO,EAAE,OAAO,KAAK,EAAE;QAC3C;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BAGb,6LAAC;gBAAI,WAAU;;kCAEb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAK,WAAU;;4CAAiE;4CAAO;4CAAK;;;;;;;kDAC7F,6LAAC;wCAAK,WAAU;;4CAA+B;4CAAO,KAAK,MAAM;4CAAC;;;;;;;;;;;;;4BAEnE,MAAM,mBACL,6LAAC;gCAAI,WAAU;;oCAA8F;oCACnG;oCAAI;;;;;;;;;;;;;kCAMlB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAE,WAAU;;oCAAoC;oCAAG;;;;;;;0CACpD,6LAAC;gCAAI,WAAU;0CAA8D;;;;;;;;;;;;kCAI/E,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAY,OAAO;gCAAa,OAAM;;;;;;0CACvC,6LAAC;gCACC,OAAO,AAAC,cAAc,YAAY,cAAc,SAAU,WAAW;gCACrE,OAAM;;;;;;;;;;;;kCAKV,6LAAC;wBAAI,WAAU;;4BAEZ,CAAC,cAAc,UAAU,cAAc,MAAM,KAAK,QAAQ,oCACzD;;kDAEE,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAG,WAAU;0DAAwC;;;;;;0DACtD,6LAAC;gDAAI,WAAU;0DACZ;oDAAC;oDAAM;oDAAM;iDAAI,CAAC,GAAG,CAAC,CAAA,uBACrB,6LAAC;wDAEC,SAAS;4DACP,qBAAqB;4DACrB,aAAa,SAAS,mCAAmC;wDAC3D;wDACA,WAAW,sBAAsB;;4DAEhC;4DAAO;;uDAPH;;;;;;;;;;;;;;;;kDAcb,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAG,WAAU;0DAAwC;;;;;;0DACtD,6LAAC;gDAAI,WAAU;0DACZ;oDAAC;oDAAK;oDAAK;iDAAK,CAAC,GAAG,CAAC,CAAA,uBACpB,6LAAC;wDAEC,SAAS;4DACP,sBAAsB;4DACtB,oBAAoB,SAAS,mCAAmC;wDAClE;wDACA,WAAW,uBAAuB;;4DAEjC;4DAAO;;uDAPH;;;;;;;;;;;;;;;;kDAab,6LAAC;wCAAW,SAAS;;4CAAc;4CAAW;4CAAiB;;;;;;;oCAAe;kDAC9E,6LAAC;wCAAW,SAAS,IAAM,OAAO,QAAQ,CAAC,IAAI,GAAG;kDAAK;;;;;;;;4BAK1D,OAAO,sBAAsB,cAAc,aAAa,cAAc,0BACpE,6LAAC;gCAAW,SAAS;0CAAW;;;;;;4BAIlC,cAAc,2BACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAW,SAAS,IAAM,YAAY;kDAAS;;;;;;kDAChD,6LAAC;wCAAW,SAAS,IAAM,YAAY;kDAAQ;;;;;;;;;;;;4BAKlD,cAAc,0BACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAW,SAAS;wCAAc,SAAS;kDAAC;;;;;;kDAC7C,6LAAC;wCAAW,SAAS;kDAAS;;;;;;;;;;;;4BAKjC,cAAc,yBACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;kDAAyI;;;;;;kDAGxJ,6LAAC;wCACC,MAAK;wCACL,aAAY;wCACZ,WAAU;wCACV,WAAW;wCACX,OAAO;wCACP,UAAU,CAAC,IAAM,qBAAqB,EAAE,MAAM,CAAC,KAAK,CAAC,WAAW;;;;;;kDAElE,6LAAC;wCAAW,SAAS;wCAAsB,SAAS;kDAAC;;;;;;oCAGpD,+BAAiB,6LAAC;wCAAE,WAAU;kDAA4B;;;;;;kDAC3D,6LAAC;wCAAW,SAAS;kDAAW;;;;;;;;;;;;;;;;;;;;;;;;0BAOxC,6LAAC;gBAAI,WAAU;;kCAEb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAAyG;;;;;;0CAGvH,6LAAC;gCAAI,WAAU;0CACZ,WAAW,GAAG,CAAC,CAAA;oCACd,MAAM,QAAQ,UAAU,MAAM,CAAC,CAAA,IAAK,MAAM,MAAM,MAAM;oCACtD,MAAM,MAAM,SAAS,OAAO,IAAI;oCAChC,MAAM,cAAc,QAAQ;oCAE5B,qBACE,6LAAC;wCAAe,WAAW,CAAC,iGAAiG,EAAE,cAAc,eAAe,4BAA4B;;0DACtL,6LAAC;gDAAK,WAAU;0DAAiB;;;;;;0DAEjC,6LAAC;gDAAI,WAAU;0DACZ;uDAAI,MAAM;iDAAK,CAAC,GAAG,CAAC,CAAC,GAAG,kBACvB,6LAAC;wDAEC,WAAW,CAAC,iCAAiC,EAC3C,IAAI,QACA,yEACA,mBACJ;uDALG;;;;;;;;;;0DASX,6LAAC;gDAAK,WAAW,CAAC,4BAA4B,EAAE,cAAc,oBAAoB,IAAI;0DACnF;;;;;;;uCAhBK;;;;;gCAoBd;;;;;;4BAED,QAAQ,KAAK,CAAC,cAAc,UAAU,cAAc,MAAM,mBACzD,6LAAC;gCAAI,WAAU;0CAA4F;;;;;;;;;;;;kCAO/G,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAAyG;;;;;;4BAGtH,UAAU,MAAM,KAAK,kBACpB,6LAAC;gCAAE,WAAU;0CAA4B;;;;;qDAEzC,6LAAC;gCAAG,WAAU;0CACX,UAAU,GAAG,CAAC,CAAC,UAAU,sBACxB,6LAAC;wCAAqB,WAAU;;0DAC9B,6LAAC;gDAAK,WAAU;;oDAAqB,QAAQ;oDAAE;oDAAG,SAAS,IAAI;;;;;;;0DAC/D,6LAAC;gDAAK,WAAU;;oDAA6B,SAAS,SAAS;oDAAC;;;;;;;0DAChE,6LAAC;gDAAK,WAAU;0DAEb,IAAI,KAAK,SAAS,UAAU,EAAE,cAAc,CAAC,SAAS;oDACnD,MAAM;oDACN,OAAO;oDACP,KAAK;oDACL,MAAM;oDACN,QAAQ;oDACR,QAAQ,MAAM,iBAAiB;gDACnC;;;;;;;uCAZK,SAAS,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsBpC;GA1PwB;;QAQlB,wIAAQ;;;KARU;AA4PxB,sBAAsB;AAEtB,SAAS,YAAY,EAAE,KAAK,EAAE,KAAK,EAAoC;IACrE,MAAM,SAAS,UAAU,OAAO,UAAU;IAC1C,MAAM,UAAU,UAAU;IAC1B,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;0BAAkE;;;;;;0BACjF,6LAAC;gBAAI,WAAW,CAAC,+JAA+J,EAAE,SAAS,wCAAwC,sCAAsC,CAAC,EAAE,UAAU,qCAAqC,IAAI;0BAC5T;;;;;;;;;;;;AAIT;MAXS;AAaT,SAAS,WAAW,EAAE,QAAQ,EAAE,OAAO,EAAE,YAAY,KAAK,EAA2E;IACnI,qBACE,6LAAC;QACC,SAAS;QACT,WAAW,CAAC,8JAA8J,EAAE,YAAY,oBAAoB,cAAc;;0BAE1N,6LAAC;gBAAK,WAAU;0BAAwI;;;;;;0BACxJ,6LAAC;gBAAK,WAAU;0BAAoC;;;;;;;;;;;;AAG1D;MAVS"}},
    {"offset": {"line": 857, "column": 0}, "map": {"version":3,"sources":["file:///Users/taisaitou/GeminiCLI/node_modules/next/src/build/webpack/loaders/next-flight-loader/action-client-wrapper.ts"],"sourcesContent":["// This file must be bundled in the app's client layer, it shouldn't be directly\n// imported by the server.\n\nexport { callServer } from 'next/dist/client/app-call-server'\nexport { findSourceMapURL } from 'next/dist/client/app-find-source-map-url'\n\n// A noop wrapper to let the Flight client create the server reference.\n// See also: https://github.com/facebook/react/pull/26632\n// eslint-disable-next-line import/no-extraneous-dependencies\nexport { createServerReference } from 'react-server-dom-webpack/client'\n"],"names":["callServer","createServerReference","findSourceMapURL"],"mappings":"AAAA,gFAAgF;AAChF,0BAA0B;;;;;;;;;;;;;;;;IAEjBA,UAAU,EAAA;eAAVA,eAAAA,UAAU;;IAMVC,qBAAqB,EAAA;eAArBA,QAAAA,qBAAqB;;IALrBC,gBAAgB,EAAA;eAAhBA,qBAAAA,gBAAgB;;;+BADE;qCACM;wBAKK","ignoreList":[0]}}]
}