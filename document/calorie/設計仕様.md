# カロリー記録アプリ 詳細設計書

## 1. アプリ概要

*   **タイトル**: カロリー記録アプリ
*   **サブタイトル**: その100kcalを削り出せ。
*   **コンセプト**: 写真を撮るだけでAIが「削れるカロリー」を指摘し、日次・週次の目標達成を視覚的に支援する。

## 2. 主要機能

### 機能内容

1.  **AIカロリー推定**
    *   食事写真をGemini APIに送信し、料理名、推定カロリー、内訳を解析。
2.  **削り出しアドバイス**
    *   あと100kcal減らすための具体的な食べ方（例：ご飯を二口残す等）をAIが提案。
3.  **摂取ログ管理**
    *   日ごとの合計摂取量と目標値の差分をダッシュボードに表示。
4.  **週次進捗ビュー**
    *   7日間の平均摂取量をグラフ化し、減量トレンドを確認。
5.  **マイプリセット**
    *   定番メニュー（外食・自炊）を名前とカロリーで登録し、1タップで記録。

## 3. 画面構成 (UI/UX)

*   **Dashboard (`/calorie`)**: 今日の残りカロリー（ドーナツグラフ）、週の体重・カロリー推移（ラインチャート）。
*   **Scanner (`/calorie/scan`)**: iPhoneカメラ起動、または画像アップロードボタン。
*   **Log (`/calorie/log`)**: その日の食事一覧。AI解析結果の微調整フォーム。
*   **Settings (`/calorie/settings`)**: 1日の目標カロリーの設定、プリセット料理の管理。

## 4. データモデル (Prisma Schema)

既存の `prisma/schema.prisma` に以下のモデルを追加する。

```prisma
model MealLog {
  id          String   @id @default(cuid())
  date        DateTime @default(now())
  foodName    String
  calories    Int
  imagePath   String?  // 画像を保存する場合
  advice      String?  // Geminiからの削り出し助言
}

model FoodPreset {
  id        String @id @default(cuid())
  name      String @unique
  calories  Int
}
```
