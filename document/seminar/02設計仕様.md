# 設計仕様書

## 1. はじめに

このドキュメントは、「[01要件定義.md](01要件定義.md)」で定義された要件に基づき、郵便番号検索アプリケーションの技術的な設計と仕様を定義します。

## 2. システム構成

このアプリケーションは、フロントエンドのみで構成される静的なウェブページとして実装します。ユーザーのブラウザ上で動作するJavaScriptが、外部のWebAPIと通信して住所情報を取得します。

**処理フロー:**
1.  ユーザーがブラウザでHTMLページにアクセスします。
2.  郵便番号を入力し、「検索」ボタンをクリックします。
3.  JavaScriptが入力値を取得し、外部の郵便番号検索APIにリクエストを送信します。
4.  APIから返却された住所情報（JSON形式）をJavaScriptが受け取ります。
5.  取得した住所情報を解析し、HTMLの指定された領域に表示します。
6.  検索が完了すると、入力欄はクリアされ、再度フォーカスが当たります。
7.  成功した検索は、セッション内の一時的な履歴として保存・表示されます。

## 3. 使用するWebAPI

住所情報の取得には、無料で利用可能な外部APIを使用します。

*   **API名:** zipcloud
*   **提供元:** 株式会社アイビス
*   **APIエンドポイントURL:** `https://zipcloud.ibsnet.co.jp/api/search`
*   **リクエスト方法:** GETリクエスト
*   **リクエストパラメータ:**
    *   `zipcode`: 郵便番号（例: `1000001`）
*   **レスポンス形式:** JSON (コールバック関数を指定した場合はJSONP)

## 4. 画面設計

アプリケーションの主要なUIは、画面中央に配置されたカード型コンポーネント内に集約されます。画面は以下の要素で構成されます。

*   **タイトル:** アプリケーションの目的を示す見出し。「`郵便番号住所検索`」とします。
*   **郵便番号入力欄:** ユーザーが郵便番号を入力するためのテキストボックス。
    *   `<label>`は配置せず、代わりに`placeholder`属性で「`郵便番号 (例: 1000001)`」のように入力例を提示します。
    *   入力は7桁の数字のみに制限されます。
*   **検索ボタン:** 住所検索を実行するためのボタン。テキストは「`検索`」とします。
*   **結果表示エリア:** 検索結果の住所またはエラーメッセージを表示するためのスペース。初期状態では「`ここに住所が出ます`」と表示されます。
*   **検索履歴エリア:** カード下部に配置され、直近10件の検索成功履歴（郵便番号と住所）を表示します。この履歴はブラウザを閉じると消去されます。

## 5. ファイル構成

プロジェクトは以下のファイル・フォルダで構成されます。

*   **`実装/`**: 実装されたソースコードが格納されるフォルダ。
    *   **`index.html`:** アプリケーションの基本構造を定義するHTMLファイル。
    *   **`style.css`:** アプリケーションの見た目を整えるCSSファイル。RGBを基調としたデザインが適用されます。
    *   **`script.js`:** 郵便番号の取得、API通信、結果の表示など、アプリケーションの動作を記述するJavaScriptファイル。
*   **`01要件定義.md`**
*   **`02設計仕様.md`**
*   **`03実装手順.md`**
*   **`04動作検証.md`**
*   **`999プロンプト.md`**

## 6. 機能詳細

### 6.1. 郵便番号入力
*   `input`タグの`maxlength`属性により、入力は7桁に制限されます。
*   `pattern="[0-9]*"`および`inputmode="numeric"`属性により、数字以外の入力を抑止し、モバイルデバイスで数字キーボードを表示するよう促します。

### 6.2. 検索実行後の動作
*   検索処理（成功・失敗問わず）が完了した後、ユーザーが次の検索をすぐに行えるように、以下の動作を自動的に実行します。
    *   郵便番号入力欄のテキストをクリアします。
    *   郵便番号入力欄に再度フォーカスを当てます。

### 6.3. 検索履歴の永続化
*   **目的:** ユーザーが同じセッション内で以前の検索結果を簡単に確認できるようにします。
*   **使用技術:** `sessionStorage`
*   **動作:**
    1.  ページ読み込み時、`sessionStorage`に保存されている履歴データを読み込み、画面に表示します。
    2.  検索が成功すると、その結果（郵便番号と住所）が履歴の先頭に追加されます。
    3.  履歴が10件を超えた場合、最も古い履歴が削除されます。
    4.  更新された履歴は、`JSON.stringify()`で文字列に変換された後、`sessionStorage`に保存されます。
    5.  ブラウザのタブまたはウィンドウが閉じられると、`sessionStorage`のデータは自動的に消去されます。
