# 経営支援ダッシュボード アプリケーション仕様

## 1. 概要

本アプリケーションは、Next.jsで構築された経営支援ツールです。主に「損益計算(P/L)ダッシュボード」と「Wikipedia風単語帳」の2つの機能を提供します。

## 2. 主要機能

### 2.1. 損益計算(P/L)ダッシュボード

メインページに表示されるインタラクティブな損益計算書シミュレーターです。

- **P/L風レイアウト**: 売上高から当期純利益まで、実際の損益計算書に近い順序で項目が配置されています。
- **数値表示**:
    - すべての数値は右寄せで表示され、桁が揃っています。
    - 計算結果は3桁ごとにカンマ区切りで表示されます。
- **データ入力**:
    - 各項目のラベル（例：「売上高」）をクリックすると、その内訳を編集する詳細ページに移動します。合計値の直接入力は行いません。
- **プリセット機能**:
    - **ランダム**: クリックすると、ランダムなP/Lデータ（内訳も含む）が生成されます。
    - **業種別**: 「自転車店」「ファミレス」「保険代理店」「米の卸売」「IT(ソフト)」の5つの業種について、典型的なP/Lデータ（内訳も含む）を読み込みます。

### 2.2. 内訳詳細ページ

各P/L項目の内訳（勘定科目と金額）を編集するためのページです。

- **動的ルーティング**: `/details/[section]` のようなURLで、各項目専用のページが動的に生成されます（例: `/details/sga`）。
- **内訳の編集**:
    - 各詳細ページには、最大5つの内訳項目が表示されます。
    - 各項目の金額はキーボードから直接入力可能です。
    - 入力された全角数字はリアルタイムで半角に自動変換されます。
    - 金額入力欄は、フォーカスが外れると自動で3桁カンマ区切り表示になります。
- **自動同期**:
    - 内訳の金額を変更すると、その合計値が即座に計算され、メインダッシュボードの合計値にも反映されます。
- **ナビゲーション**: すべての詳細ページには、メインのP/Lダッシュボードに戻るためのリンクが設置されています。

### 2.3. Wikipedia風単語帳

- **CRUD機能**: 単語と意味の追加、一覧表示、検索、削除が可能です。
- **データ永続化**: `localStorage` を使用しており、ブラウザを閉じてもデータは保持されます。
- **インポート機能**:
    - 「JSONからインポート」ボタンをクリックすることで、`public/words.json` ファイルから単語データを一括で読み込み、単語帳に登録できます。
    - インポート時、既存の単語（小文字・トリム後で判定）は定義が更新され、新しい単語は追加されます。

## 3. 技術仕様

- **フレームワーク**: Next.js (App Router)
- **スタイリング**: Tailwind CSS
- **状態管理**:
    - **P/Lダッシュボード**: React Context API (`FinancialContext`) を使用し、アプリケーション全体でP/Lデータを一元管理しています。
    - **単語帳**: コンポーネント内のローカルステート (`useState`) で管理しています。
- **データ永続化**:
    - **P/Lデータ**: `localStorage` にアプリケーションの状態全体を保存しています（`FinancialContext`内で処理）。
    - **単語帳データ**: `localStorage` に単語リストを保存しています。
- **データファイル**:
    - `public/words.json`: 単語帳のインポート機能で使用されるJSONデータファイルです。

---
このドキュメントは、これまでの開発経緯をまとめたものです。
